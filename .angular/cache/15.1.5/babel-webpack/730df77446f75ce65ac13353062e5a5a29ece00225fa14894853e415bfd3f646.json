{"ast":null,"code":"import { Subscription } from 'rxjs';\nimport { initTeamsValue } from 'src/app/models/teams.model';\nimport { TeamDropdownComponent } from './team-dropdown/team-dropdown.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/team.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"./team-dropdown/team-dropdown.component\";\nfunction TeamListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"label\", 2);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"app-team-dropdown\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.selectedTeam.sitLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"subTeams\", ctx_r0.teamTree)(\"id\", \"sit\");\n  }\n}\nfunction TeamListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"label\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"app-team-dropdown\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.selectedTeam.aftLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"subTeams\", ctx_r1.teamTree[0].teams)(\"id\", \"aft\");\n  }\n}\nconst HSSideNav = require('../../../../../../../../src/assets/vendor/hs-navbar-vertical-aside/dist/hs-navbar-vertical-aside.min.js');\nconst HSBsDropdown = require('../../../../../../../../src/assets/js/hs.bs-dropdown.js');\nconst HSFormSearch = require('../../../../../../../../src/assets/vendor/hs-form-search/dist/hs-form-search.min.js');\nconst HSCore = require('../../../../../../../../src/assets/js/hs.core.js');\nconst HSTomSelect = require('../../../../../../../../src/assets/js/hs.tom-select.js');\nexport class TeamListComponent {\n  constructor(teamService) {\n    this.teamService = teamService;\n    this.teams = initTeamsValue;\n    this.teamTree = [];\n    this.rootTeams = [];\n    this.childTeams = [];\n    this.selectedTeam = {\n      sit: '',\n      aft: '',\n      sitLabel: '--',\n      aftLabel: '--'\n    };\n    this.teamsSub = new Subscription();\n  }\n  ngOnInit() {\n    this.teamsSub = this.teamService.getTeamsListListener().subscribe(teamsDetails => {\n      this.teams = teamsDetails;\n      this.teamTree = teamsDetails.tree;\n      this.childTeams = teamsDetails.tree && teamsDetails.tree[0].teams;\n      console.log(\"Teams =>\", this.teams);\n    });\n  }\n  ngOnChanges(changes) {\n    console.log(\"Changes\", changes);\n  }\n  ngOnDestroy() {\n    this.teamsSub.unsubscribe();\n  }\n  ngAfterViewChecked() {\n    if (this.teamDropdownComponent && this.teamDropdownComponent.optionUpdated === 2) {\n      new HSSideNav('.js-navbar-vertical-aside').init();\n      HSBsDropdown.init();\n      new HSFormSearch('.js-form-search');\n      HSCore.components.HSTomSelect = HSTomSelect;\n      HSCore.components.HSTomSelect.init('.js-select');\n      setTimeout(() => {\n        HSCore.init();\n        HSTomSelect.getItems().forEach(select => {\n          if (select.inputId === 'sit') {\n            this.selectedTeam.sit = select.getValue();\n          }\n          if (select.inputId === 'aft') {\n            this.selectedTeam.aft = select.getValue();\n          }\n          select.on(\"change\", value => {\n            if (select.inputId === 'sit') {\n              this.selectedTeam.sit = value;\n              // Check if the selected `SIT` has any subteams\n              this.teamTree = this.teams.tree.filter(t => t.teamId === this.selectedTeam.sit);\n              this.teamChangeHandler(this.selectedTeam.sit);\n            }\n            if (select.inputId === 'aft') {\n              this.selectedTeam.aft = value;\n            }\n          });\n        });\n        this.teamChangeHandler(this.selectedTeam.sit);\n      }, 10);\n    }\n  }\n  teamChangeHandler(sit = \"\") {\n    console.log(\"Handling team selection changes\", this.selectedTeam);\n    this.teamService.getTeamSDRConfig(sit);\n    this.teamService.getSDRConfigListener().subscribe(config => {\n      this.selectedTeam.sitLabel = config.clientBroswerApp.leftNavbar.teamSelection.l1Dropdown.label;\n      this.selectedTeam.aftLabel = config.clientBroswerApp.leftNavbar.teamSelection.l2Dropdown.label;\n    });\n  }\n}\nTeamListComponent.ɵfac = function TeamListComponent_Factory(t) {\n  return new (t || TeamListComponent)(i0.ɵɵdirectiveInject(i1.TeamService));\n};\nTeamListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TeamListComponent,\n  selectors: [[\"app-team-list\"]],\n  viewQuery: function TeamListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(TeamDropdownComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.teamDropdownComponent = _t.first);\n    }\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"col mb-3\", 4, \"ngIf\"], [1, \"col\", \"mb-3\"], [1, \"mb-1\", \"level1-dd\"], [3, \"subTeams\", \"id\"], [1, \"mb-1\", \"level2-dd\"]],\n  template: function TeamListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, TeamListComponent_div_0_Template, 4, 3, \"div\", 0);\n      i0.ɵɵtemplate(1, TeamListComponent_div_1_Template, 4, 3, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.teamTree.length);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.teamTree.length && ctx.teamTree[0].teams.length > 1);\n    }\n  },\n  dependencies: [i2.NgIf, i3.TeamDropdownComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Subscription","initTeamsValue","TeamDropdownComponent","i0","HSSideNav","require","HSBsDropdown","HSFormSearch","HSCore","HSTomSelect","TeamListComponent","constructor","teamService","sit","aft","sitLabel","aftLabel","ngOnInit","teamsSub","getTeamsListListener","subscribe","teamsDetails","teams","teamTree","tree","childTeams","console","log","ngOnChanges","changes","ngOnDestroy","unsubscribe","ngAfterViewChecked","teamDropdownComponent","optionUpdated","init","components","setTimeout","getItems","forEach","select","inputId","selectedTeam","getValue","on","value","filter","t","teamId","teamChangeHandler","getTeamSDRConfig","getSDRConfigListener","config","clientBroswerApp","leftNavbar","teamSelection","l1Dropdown","label","l2Dropdown","selectors","viewQuery"],"sourceRoot":"","sources":["/home/ubuntu/SDR/MF-DAM-SDR-Client/src/app/components/main/aside/navbar-vertical-content/teams/team-list/team-list.component.ts","/home/ubuntu/SDR/MF-DAM-SDR-Client/src/app/components/main/aside/navbar-vertical-content/teams/team-list/team-list.component.html"],"sourcesContent":["import {\n  AfterViewChecked,\n  Component,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  OnChanges\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { TeamsModel, initTeamsValue } from 'src/app/models/teams.model';\nimport { SDRConfig } from 'src/app/models/config.model';\nimport { TeamService } from 'src/app/services/team.service';\nimport { TeamDropdownComponent } from './team-dropdown/team-dropdown.component';\n\nconst HSSideNav = require('../../../../../../../../src/assets/vendor/hs-navbar-vertical-aside/dist/hs-navbar-vertical-aside.min.js');\nconst HSBsDropdown = require('../../../../../../../../src/assets/js/hs.bs-dropdown.js');\nconst HSFormSearch = require('../../../../../../../../src/assets/vendor/hs-form-search/dist/hs-form-search.min.js');\nconst HSCore = require('../../../../../../../../src/assets/js/hs.core.js');\nconst HSTomSelect = require('../../../../../../../../src/assets/js/hs.tom-select.js');\n\n@Component({\n  selector: 'app-team-list',\n  templateUrl: './team-list.component.html',\n  styleUrls: ['./team-list.component.scss'],\n})\nexport class TeamListComponent implements OnInit, OnDestroy, AfterViewChecked, OnChanges {\n  teams: TeamsModel = initTeamsValue;\n  teamTree: any = [];\n\n  rootTeams: any = [];\n  childTeams: any = [];\n\n  selectedTeam = {\n    sit: '',\n    aft: '',\n    sitLabel: '--',\n    aftLabel: '--'\n  }\n\n  @ViewChild(TeamDropdownComponent)\n  teamDropdownComponent!: TeamDropdownComponent;\n\n  private teamsSub: Subscription = new Subscription();\n\n  constructor(private teamService: TeamService) {}\n\n  ngOnInit(): void {\n    this.teamsSub = this.teamService\n      .getTeamsListListener()\n      .subscribe((teamsDetails: TeamsModel) => {\n        this.teams = teamsDetails;\n        this.teamTree = teamsDetails.tree;\n        this.childTeams = teamsDetails.tree && teamsDetails.tree[0].teams;\n        console.log(\"Teams =>\", this.teams);\n      });\n\n  }\n\n  ngOnChanges(changes: any) {\n    console.log(\"Changes\", changes)\n  }\n\n  ngOnDestroy(): void {\n    this.teamsSub.unsubscribe();\n  }\n\n  ngAfterViewChecked() {\n    if (\n      this.teamDropdownComponent &&\n      this.teamDropdownComponent.optionUpdated === 2\n    ) {\n\n      new HSSideNav('.js-navbar-vertical-aside').init();\n      HSBsDropdown.init();\n      new HSFormSearch('.js-form-search');\n      HSCore.components.HSTomSelect = HSTomSelect;\n      HSCore.components.HSTomSelect.init('.js-select');\n\n      setTimeout(() => {\n        HSCore.init();\n        HSTomSelect.getItems().forEach((select: any) => {\n\n          if (select.inputId === 'sit') {\n            this.selectedTeam.sit = select.getValue();\n          }\n\n          if (select.inputId === 'aft') {\n            this.selectedTeam.aft = select.getValue();\n          }\n\n          select.on(\"change\", (value: any) => {\n            if (select.inputId === 'sit') {\n              this.selectedTeam.sit = value;\n              // Check if the selected `SIT` has any subteams\n              this.teamTree = this.teams.tree.filter((t:any) => t.teamId === this.selectedTeam.sit);\n              this.teamChangeHandler(this.selectedTeam.sit);\n            }\n\n            if (select.inputId === 'aft') {\n              this.selectedTeam.aft = value;\n            }\n          });\n\n        });\n\n        this.teamChangeHandler(this.selectedTeam.sit);\n\n      }, 10)\n\n\n    }\n  }\n\n  teamChangeHandler(sit = \"\") {\n      console.log(\"Handling team selection changes\", this.selectedTeam);\n      this.teamService.getTeamSDRConfig(sit);\n      this.teamService.getSDRConfigListener().subscribe((config: any) => {\n        this.selectedTeam.sitLabel = config.clientBroswerApp.leftNavbar.teamSelection.l1Dropdown.label;\n        this.selectedTeam.aftLabel = config.clientBroswerApp.leftNavbar.teamSelection.l2Dropdown.label;\n      });\n  }\n}\n","<!-- Signed in team -->\n<div class=\"col mb-3\" *ngIf=\"teamTree.length\">\n  <label class=\"mb-1 level1-dd\">{{selectedTeam.sitLabel}}</label>\n  <app-team-dropdown [subTeams]=teamTree [id]=\"'sit'\"></app-team-dropdown>\n</div>\n<!-- Client -->\n<div class=\"col mb-3\" *ngIf=\" teamTree.length && teamTree[0].teams.length > 1\">\n  <label class=\"mb-1 level2-dd\">{{selectedTeam.aftLabel}}</label>\n  <app-team-dropdown [subTeams]=teamTree[0].teams [id]=\"'aft'\"></app-team-dropdown>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}